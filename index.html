<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8" />
  <title>Dumb Ways To Die – StaticQuasar931</title>
  <meta name="viewport" content="initial-scale=1, width=device-width" />
  <meta name="robots" content="index, follow, max-image-preview:large" />
  <meta name="theme-color" content="#000000" />
  <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/StaticQuasar931/Images@main/icon.png" />

  <style>
    :root{
      --brand:#5ee1ff;
      --glow:0 0 12px rgba(94,225,255,.65), 0 0 32px rgba(155,255,183,.35);
      --shadow:0 10px 30px rgba(0,0,0,.4);
    }

    html, body{
      margin:0;
      padding:0;
      width:100%;
      height:100%;
      background:#000;
      color:#eaf4ff;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      overflow:hidden;
    }

    /* Fullscreen game container */
    #gameContainer{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#000;
      z-index:1;
    }

    #gameDiv{
      width:100%;
      height:100%;
    }

    canvas{
      display:block;
      margin:0;
    }

    /* Static Menu (top-left) */
    #staticMenu{
      position:fixed;
      left:12px;
      top:12px;
      z-index:9999;
      display:flex;
      gap:10px;
      align-items:center;
      user-select:none;
      padding:10px 14px;
      border-radius:12px;
      background:linear-gradient(135deg, rgba(20,20,28,.9), rgba(20,20,28,.6));
      border:1px solid rgba(94,225,255,.35);
      color:#e8f3ff;
      box-shadow:var(--glow), var(--shadow);
      font-size:14px;
      animation:menuEnter .6s ease .15s both;
    }

    #staticMenu a{
      color:#5ee1ff;
      font-weight:800;
      text-decoration:none;
    }

    #closeStaticMenu{
      color:#f55;
      cursor:pointer;
      padding:2px 6px;
      border-radius:6px;
      border:1px solid rgba(255,255,255,.15);
      background:rgba(255,255,255,.06);
    }

    @keyframes menuEnter{
      from{opacity:0; transform:translateY(-8px)}
      to{opacity:1; transform:translateY(0)}
    }

    /* Rotating slide-in widget (bottom-right) */
    #staticSlideMenu{
      position:fixed;
      bottom:24px;
      right:24px;
      z-index:9999;
      width:100px;
      height:100px;
      pointer-events:none;
      opacity:0;
      transform:translateX(140px) scale(.96);
    }

    #staticSlideMenu a{
      display:block;
      width:100%;
      height:100%;
    }

    #staticSlideMenu img{
      width:100%;
      height:100%;
      object-fit:contain;
      border:0;
      border-radius:0;
      background:transparent;
      box-shadow:none;
      transition:opacity .25s ease;
    }

    .slide-in{
      animation:slideIn 2s ease forwards;
    }

    .slide-out{
      animation:slideOut 2s ease forwards;
    }

    @keyframes slideIn{
      from{opacity:0; transform:translateX(140px) scale(.96)}
      to{opacity:1; transform:translateX(0) scale(1)}
    }

    @keyframes slideOut{
      from{opacity:1; transform:translateX(0) scale(1)}
      to{opacity:0; transform:translateX(140px) scale(.96)}
    }

    /* Hidden SEO helper */
    .seo-hidden{
      position:absolute;
      width:1px;
      height:1px;
      overflow:hidden;
      clip:rect(1px,1px,1px,1px);
      white-space:nowrap;
    }

    @media (max-width:600px){
      #staticMenu{
        font-size:13px;
        padding:8px 12px;
      }
      #staticSlideMenu{
        width:88px;
        height:88px;
      }
    }
  </style>

  <!-- Phaser engine -->
  <script src="js/phaser.min.js"></script>

  <!-- stages -->
  <script src="stages/boot.js"></script>
  <script src="stages/preload.js"></script>
  <script src="stages/score.js"></script>
  <script src="stages/game.js"></script>
  <script src="stages/fork.js"></script>
  <script src="stages/running.js"></script>
  <script src="stages/poke.js"></script>
  <script src="stages/wasps.js"></script>
  <script src="stages/space.js"></script>
  <script src="stages/train.js"></script>
  <script src="stages/electricity/electricityStage.js"></script>
  <script src="stages/electricity/electricity_success.js"></script>
  <script src="stages/electricity/electricity_fail.js"></script>
  <script src="stages/gameoverStage.js"></script>
  <script src="stages/electricity/electricityTest.js"></script>
  <script src="stages/dontPressTheButton.js"></script>
  <script src="stages/killThatDear.js"></script>

  <!-- jQuery (fixes "$ is not defined" in main.js) -->
  <script src="js/jquery.min.js"></script>

  <!-- all game state must be before menu/main -->
  <script src="stages/menu.js"></script>
  <script src="stages/main.js"></script>
</head>
<body>

  <!-- Fullscreen game -->
  <div id="gameContainer">
    <div id="gameDiv"></div>
  </div>

  <!-- Static Menu (top-left) -->
  <div id="staticMenu" role="region" aria-label="StaticQuasar menu">
    <a href="https://sites.google.com/view/staticquasar931/gm3z" target="_blank" rel="noopener">
      More Unblocked Games by Static
    </a>
    <span id="closeStaticMenu" title="Hide temporarily">✕</span>
  </div>

  <!-- Rotating quick link widget (bottom-right). Order: Google Form → Discord → Instagram -->
  <div id="staticSlideMenu" aria-live="polite">
    <a id="staticSlideLink"
       href="https://sites.google.com/view/staticquasar931/google-form"
       target="_blank"
       rel="noopener"
       aria-label="Open Google Form">
      <img id="staticSlideImg"
           src="https://cdn.jsdelivr.net/gh/StaticQuasar931/Images@main/GoogleForm.png"
           alt="StaticQuasar931 Google Form for feedback and requests">
    </a>
  </div>

  <!-- Hidden SEO helper -->
  <div class="seo-hidden" aria-hidden="true">
    <h1>Dumb Ways To Die unblocked game by StaticQuasar931</h1>
    <p>
      Play Dumb Ways To Die unblocked at school with StaticQuasar931. Fullscreen browser game version powered by the Phaser engine, school friendly and working on most Chromebooks. Find more unblocked games and backups on the StaticQuasar931 game list and Google Sites hub.
    </p>
  </div>

  <script>
    // Leave or reload warning
    window.onbeforeunload = function () {
      return "Are you sure you want to leave? Your Dumb Ways To Die session may reset.";
    };

    // Static Menu show/hide with 3 minute return
    (function(){
      const menu = document.getElementById("staticMenu");
      const btn  = document.getElementById("closeStaticMenu");
      const KEY  = "sq931_staticMenu_hidden_until";

      const show = () => {
        if (menu) menu.style.display = "flex";
      };

      const hideFor3m = () => {
        if (!menu) return;
        menu.style.display = "none";
        const until = Date.now() + 180000;
        try{
          localStorage.setItem(KEY, String(until));
        }catch(e){}
        setTimeout(show, 180000);
      };

      let until = 0;
      try{
        until = parseInt(localStorage.getItem(KEY) || "0", 10);
      }catch(e){
        until = 0;
      }

      if (until && Date.now() < until){
        if (menu) menu.style.display = "none";
        setTimeout(show, until - Date.now());
      } else {
        show();
      }

      if (btn) btn.onclick = hideFor3m;
    })();

    // Rotator: Google Form → Discord → Instagram
    (function(){
      const wrap = document.getElementById("staticSlideMenu");
      const a    = document.getElementById("staticSlideLink");
      const img  = document.getElementById("staticSlideImg");

      if (!wrap || !a || !img) return;

      const FORM = {
        src:  "https://cdn.jsdelivr.net/gh/StaticQuasar931/Images@main/GoogleForm.png",
        alt:  "StaticQuasar931 Google Form for feedback and requests",
        link: "https://sites.google.com/view/staticquasar931/google-form"
      };
      const DISCORD = {
        src:  "https://cdn.jsdelivr.net/gh/StaticQuasar931/Images@main/Join_Our_DC_StaticQuassar931_lcplrf.png",
        alt:  "Join the StaticQuasar931 Discord",
        link: "https://discord.gg/DP2hM7RRhR"
      };
      const INSTA = {
        src:  "https://cdn.jsdelivr.net/gh/StaticQuasar931/Images@main/Follow-us--IG",
        alt:  "StaticQuasar931 Instagram",
        link: "https://www.instagram.com/freeschoolgamepage/"
      };
      const ROTATION = [FORM, DISCORD, INSTA];

      // Preload icons
      ROTATION.forEach(o => {
        const p = new Image();
        p.src = o.src;
      });

      const T_IN = 2000;
      const T_SHOW = 5000;
      const T_OUT = 2000;
      const T_HIDDEN = 20000;
      let idx = 0;

      function apply(state){
        a.href = state.link;
        img.alt = state.alt;
        img.style.opacity = "0";
        setTimeout(() => { img.src = state.src; }, 80);
        img.onload = () => { img.style.opacity = "1"; };
      }

      function delay(ms){
        return new Promise(r => setTimeout(r, ms));
      }

      (async function cycle(){
        for(;;){
          apply(ROTATION[idx]);
          wrap.style.pointerEvents = "auto";
          wrap.classList.remove("slide-out");
          wrap.classList.add("slide-in");
          await delay(T_IN + T_SHOW);
          wrap.classList.remove("slide-in");
          wrap.classList.add("slide-out");
          await delay(T_OUT);
          wrap.style.pointerEvents = "none";
          await delay(T_HIDDEN);
          idx = (idx + 1) % ROTATION.length;
        }
      })();
    })();

    // Keyboard secret toggle: y + u + i to toggle all Visual SEO
    (function(){
      const idsToToggle = ["staticMenu", "staticSlideMenu"];
      let seq = [];
      const target = ["y","u","i"];

      function toggle(){
        idsToToggle.forEach(id => {
          const el = document.getElementById(id);
          if(!el) return;
          const currentDisplay = getComputedStyle(el).display;
          const isHidden = (el.style.display === "none" || currentDisplay === "none");
          el.style.display = isHidden ? (id === "staticMenu" ? "flex" : "block") : "none";
        });
      }

      window.addEventListener("keydown", (e) => {
        seq.push(e.key.toLowerCase());
        if (seq.length > 3) seq.shift();
        if (seq.join("") === target.join("")) toggle();
      });
    })();
  </script>

</body>
</html>
